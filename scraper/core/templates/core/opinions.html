{% extends 'base.html' %}


{% block content %}

    <form action="{% url 'products' %}" method="post">
        {% csrf_token %}
        <input type='hidden' value='{{opinion.product_id}}' name="product_id">
        <td><button type='submit' class='btn btn-sm btn-warning'>Pobierz opinie w pliku .json</button>
        </td>
    </form>

    <table id='table' class="table mt-5 table-responsive table-striped table-light">
        <tbody>
            <thead>
                <tr>
                    <th scope="col">Autor</th>
                    <th scope="col">Rekomendacja</th>
                    <th scope="col">Ocena</th>
                    <th scope="col">Zaufana opinia</th>
                    <th scope="col">Data wystawienia</th>
                    <th scope="col">Data zakupu</th>
                    <th scope="col">Opinia uznana za przydatną</th>
                    <th scope="col">Opinia uznana za nieprzydatną</th>
                    <th scope="col">Treść</th>
                    <th scope="col">Wady</th>
                    <th scope="col">Zalety</th>
                </tr>
            </thead>

        </tbody>
    </table>

{% endblock  %}
{% comment %} showing opinions with DataTable framework {% endcomment %}
{% block footer_scripts %}

var data = [
{% for opinion in object_list %}
    ["{{opinion.author}}",
    "{% if opinion.recomendation %}POLECAM {% else %}NIE POLECAM{% endif %}",
    "{{opinion.stars}}",
    "{% if opinion.confirmed_by_purchase %}TAK {% else %}NIE {% endif %}",
    "{{opinion.issue_date}}",
    "{% if opinion.purchase_date is not None %}{{opinion.purchase_date}}{% endif %}",
    "{{opinion.usefull}}",
    "{{opinion.useless}}",
    "{{opinion.content}}",
    "{{opinion.cons}}",
    "{{opinion.pros}}"],
{% endfor %}
]      

$(document).ready(function () {
            $('#table').DataTable({
                data:data,
                searching: false,
                paging: false,
                info: false,
            });
        });
{% endblock %}
